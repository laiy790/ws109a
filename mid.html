<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title></title>
    <style>
        
        
       .ban{
           width:500px;
           height:auto;
           
           
       }
        #send {
            width:80px;
            height:25px;
            font-size: 12px;
            text-align: center;
            line-height: 25px;
            background: rgb(145, 200, 236);
        }
        
        
    </style>
</head>
<body class="centere">
    <br/>使用者名稱: <input type="text" id="user" class="mytext"/><br/>
    <br/>想說的話: <textarea id="word"></textarea><br/>
    <br/><button id="send">留言</button><br/><br/>
    <div class="ban" ></div>
<script>
var user=document.getElementById ("user");
var word=document.getElementById ("word");
var send=document.getElementById ("send");
var ban=document.querySelector (".ban");
localStorage.clear ();//加了這行每重載一次會清除留言區
readdata();
send.onclick =function(){
  var time=new Date();
  var aiw={    //存放的地方
        theuser:user.value,
        theword:word .value,
        now_time:time.toLocaleString()  //時間
    };
    // console.log(JSON.stringify (aiw));
    localStorage.setItem (time.getTime(),JSON.stringify (aiw));
    user.value="";
    word.value ="";

    
     readdata();
}
function readdata(){
    ban.innerHTML ="";
    var length=localStorage.length-1;
    for(var i=length;i>=0;i--){
      var k=localStorage.key(i);  
      var data=JSON.parse (localStorage.getItem(k));  //
        console.log(k);
        ban.innerHTML +=data.theuser +" :&nbsp;&nbsp;"+data.theword +" <br/>"+ data.now_time +"<br/>";
    }
}
</script>
</body>
</html>